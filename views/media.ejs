<!DOCTYPE html>
<html lang="en">
<head>
    <title>SHU Library</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <div class="header">
      <a href="/">
        <img src="/images/LibLogo.png" alt="Library Logo" class="logo-img"
      /></a>
      <div class="search-container">
        <form action="/search" method="GET">
          <input
            type="text"
            class="search-input"
            name="query"
            placeholder="Search..."
            required
          />
          <button type="submit" class="search-button">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
    </div>
  </head>
  <body>
    <h1 class="header-title">SHU Library</h1>

    <div class="container">
      <%- include('./partials/sidebar'); %>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Description</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="book-container">
        <img id="media-page-cover" src="<%= book.image %>" alt="Book Cover" />
        <ul id="media-page-list">
          <li id="media-buttons">
            <button>
              reserve
            </button>
            <button>
              edit
            </button>
            <i
              id="media-wishlist"
              class="bi bi-star-fill"
              data-id="<%= book.id %>"
              style="cursor: pointer; font-size: x-large; vertical-align: -4px; color: <%= book.wishlisted ? 'gold' : 'black' %>"
            ></i>
          </li>
          <li class="media-items">
            <h1 id="book-title"><%= book.name %></h1>
          </li>
          <li class="media-items">
            <h3 id="book-author">Author: <%= book.author %></h3>
          </li>
          <li class="media-items">
            <p id="book-description"></p>
            <ul id="book-details">
              <%= book.description %>
            </ul>
          </li>
        </ul>
    </div>
</body>
<script>
  document.querySelectorAll("#media-wishlist").forEach((element) => {

    element.addEventListener("click", async () => {
      const request = await fetch("/wishlist", {
        method: "POST",
        body: JSON.stringify({
          mediaId: element.dataset.id,
        }),
        headers: {
          "Content-Type": "application/json",
        },
      });

      const json = await request.json();
      element.style["color"] = json.success ? "gold" : "black";
    });
  });

  function selectImage(){
    
  }
</script>
</html>